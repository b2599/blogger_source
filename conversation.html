<style>
    #content #conversation{
        width: 100%;
        border: 0.2em solid #ffb0f2;
        position: relative;
        min-height: 27em;
        margin-bottom: 5em;
    }
    #content #conversation #image-box{
        width: 100%;
        height: 333px;
        overflow: hidden;
        position: relative;
    }
    #content #conversation #image-box img{
        width: 100%;
        height: auto;
        position: absolute;
        top: 211px;
        left: 417px;
        -webkit-transform: translate(-50%,-50%);
        -ms-transform: translate(-50%,-50%);
        transform: translate(-50%,-50%);
    }
    #content #conversation #write-script{
        position: absolute;
        bottom: 2em;
        left: 1em;
    }
    #content #conversation #write-script p {
        padding: 0 1em 0 0;
    }
    #content #conversation .next-div{
        color: #ffb0f2;
        position: absolute;
        bottom: 0;
        right: 0.5em;
        background: none;
        border: none;
        font-size: 1.4em;
        animation: next_div 0.5s;
        animation-iteration-count: infinite;
        cursor: default;
    }
    @keyframes next_div {
        0% { transform: rotateY(0deg); }
        50% { transform: rotateY(88deg) }
        100% { transform: rotateY(166deg); }
    }
</style>
<script>
    var now_script = 0;
    var max_script = 0;
    var conversation = {
        createNextButton: function(){
            let nextButton = document.createElement("div");
            nextButton.innerHTML = "â–¼";
            nextButton.setAttribute('class', 'next-div');
            return nextButton;
        },
        createAllStarsImage: function(){
            let all_stars_image = document.createElement("div");
            all_stars_image.innerHTML = "<img data-original-height='825' data-original-width='1200' src='https://1.bp.blogspot.com/-5AgSBiIrsWA/Xa1aMuZDneI/AAAAAAAAAA4/E9tEwf8efEkO-Jlpahithxz7qe0KybwlwCEwYBhgL/s1600/all_stars.jpg' />";
            all_stars_image.setAttribute('id', 'image-box');
            return all_stars_image;
        },
        createInit: function(element){
            let next_button = conversation.createNextButton();
            let all_stars_image = conversation.createAllStarsImage();
            element.appendChild(next_button);
            element.appendChild(all_stars_image);
        },
        getText: function(){
            return document.getElementById("conversation-text").getElementsByTagName("p");
        },
        writeNextScript: function(element, scripts){
            conversation.empty(element);
            if(now_script < max_script){
                let clone_script = scripts[now_script].cloneNode(true);
                if(class_control.has(clone_script, "hidden-item")){
                    class_control.remove(clone_script, "hidden-item");
                }
                element.appendChild(clone_script);
                now_script++;
            }
            if(now_script === max_script){
                now_script = 0;
            }
        },
        activeNextButton: function(click_event_element, write_element){
            let scripts = conversation.getText();
            max_script = scripts.length;
            click_event_element.addEventListener("click", function(){
                conversation.writeNextScript(write_element, scripts);
            });
        },
        init: function (conversation_id, write_script_id) {
            let conversation_element = document.getElementById(conversation_id);
            let write_script_element = document.getElementById(write_script_id);

            if(conversation_element){
                conversation.createInit(conversation_element);
            }
            if(write_script_element){
                conversation.activeNextButton(conversation_element, write_script_element);
            }
        },
        empty: function(element){
            while(element.hasChildNodes()){
                element.removeChild(element.firstChild);
            }
        },
    };
    conversation.init("conversation", "write-script");
</script>
